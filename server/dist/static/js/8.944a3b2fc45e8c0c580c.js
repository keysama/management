webpackJsonp([8],{"/WTl":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3/0X"),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row align-content-start"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"message"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",[t._v("项目名称:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.project.name,expression:"project.name",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.project.name},on:{change:function(e){t.$set(t.project,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("项目代号:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.project.number,expression:"project.number",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.project.number},on:{change:function(e){t.$set(t.project,"number",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("项目地址:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.project.address,expression:"project.address",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.project.address},on:{change:function(e){t.$set(t.project,"address",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("建设单位:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.project.yezhu,expression:"project.yezhu",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.project.yezhu},on:{change:function(e){t.$set(t.project,"yezhu",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("建筑设计单位:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.project.design,expression:"project.design",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.project.design},on:{change:function(e){t.$set(t.project,"design",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("总包单位:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.project.danwei,expression:"project.danwei",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.project.danwei},on:{change:function(e){t.$set(t.project,"danwei",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("幕墙设计单位:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.project.mdanwei,expression:"project.mdanwei",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.project.mdanwei},on:{change:function(e){t.$set(t.project,"mdanwei",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v("  简介:")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.project.introduce,expression:"project.introduce",modifiers:{lazy:!0}}],staticClass:"form-control",staticStyle:{resize:"none"},attrs:{rows:"5"},domProps:{value:t.project.introduce},on:{change:function(e){t.$set(t.project,"introduce",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.infoEdit}},[t._v("确定")])])])])]),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"manage"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[t._m(3),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.members.length>0,expression:"members.length>0"}],staticClass:"form-group"},[a("label",[t._v("参与人列表:")]),t._v(" "),a("ul",{staticClass:"list-group"},t._l(t.members,function(e,s){return a("li",{key:s,staticClass:"list-group-item d-flex justify-content-between align-items-center",class:{"list-group-item-success":0!=s&&0!=e.state,"list-group-item-info":0==s,"list-group-item-secondary":0==e.state},staticStyle:{position:"relative"}},[a("span",[t._v(t._s(e.nickname)+"(账号:"+t._s(e.username)+")")]),a("span",{staticClass:"badge badge-pill badge-default"},[t._v(t._s(1==e.state?"已加入":"等待同意"))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.jobs[s],expression:"jobs[key]"}],staticClass:"form-control",staticStyle:{width:"auto"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.jobs,s,e.target.multiple?a:a[0])},function(e){t.jobChange(s)}]}},0==s?[a("option",{attrs:{value:"0"}},[t._v("创建者")])]:[a("option",{attrs:{value:"1"}},[t._v("参与人")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("材料商")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("领导")])]),t._v(" "),0!=s?a("span",{staticClass:"delete pointer",staticStyle:{position:"absolute",top:"1px",right:"3px"},on:{click:function(e){t.remove(s)}}},[t._v("×")]):t._e()])}))])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"d-flex flex-wrap justify-content-between",staticStyle:{"margin-bottom":"30px"}},[a("label",{staticStyle:{"padding-top":"5px"}},[t._v("添加参与人:")]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center w-100"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"form-control",attrs:{type:"text",placeholder:"对方手机号/账户"},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-info",staticStyle:{"margin-left":"10px"},attrs:{type:"button"},on:{click:t.add}},[t._v("添加")])])]),t._v(" "),t._m(4),t._v(" "),t._m(5)])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.memberEdit}},[t._v("确定修改")])])])])]),t._v(" "),t._m(6),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"select"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(7),t._v(" "),a("div",{staticClass:"modal-body"},[a("ul",{staticClass:"list-group"},t._l(t.book,function(e,s){return a("li",{key:s,ref:s,refInFor:!0,staticClass:"list-group-item pointer",on:{click:function(e){t.collapse(s)}}},[t._v("\n                                      "+t._s(e.name)+"\n                                      "),a("span",{staticClass:"badge badge-pill badge-info"},[t._v(t._s(e.member.length))]),t._v(" "),a("div",{staticClass:"collapse",attrs:{id:s}},[a("ul",{staticClass:"list-group",staticStyle:{"padding-left":"30px"}},t._l(e.member,function(e,s){return a("label",{key:s,staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.select,expression:"select"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:e.member,checked:Array.isArray(t.select)?t._i(t.select,e.member)>-1:t.select},on:{click:function(t){t.stopPropagation()},change:function(a){var s=t.select,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=e.member,n=t._i(s,o);r.checked?n<0&&(t.select=s.concat([o])):n>-1&&(t.select=s.slice(0,n).concat(s.slice(n+1)))}else t.select=i}}}),t._v(t._s(e.nickname)+"\n                                              ")])}))])])}))]),t._v(" "),a("div",{staticClass:"modal-footer"},[t._v("\n                              已选择："),t._l(t.select_member,function(e,s){return a("span",{key:s},[t._v(t._s(e.nickname))])}),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.push_select}},[t._v("确定")])],2)])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12"},[e("h4",[e("i",{staticClass:"iconfont icon-shezhi",staticStyle:{"font-size":"1.5rem"}},[this._v("工程设置")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12"},[e("ul",{staticClass:"list-group"},[e("li",{staticClass:"list-group-item pointer",attrs:{"data-toggle":"modal","data-target":"#message"}},[this._v("信息修改")]),this._v(" "),e("li",{staticClass:"list-group-item pointer",attrs:{"data-toggle":"modal","data-target":"#manage"}},[this._v("人员管理")]),this._v(" "),e("li",{staticClass:"list-group-item pointer",attrs:{"data-toggle":"modal","data-target":"#budget"}},[this._v("材料汇总")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("信息修改")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("人员管理")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex flex-wrap justify-content-between"},[e("label",[this._v("从通讯录中选择:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex flex-wrap justify-content-center",staticStyle:{"margin-top":"10px"}},[e("button",{staticClass:"btn btn-info w-50",staticStyle:{"font-size":".5rem"},attrs:{type:"button","data-toggle":"modal","data-target":"#select"}},[this._v("选择通讯录")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"budget"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("材料汇总")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("ul",{staticClass:"list-group"},[a("li",{staticClass:"list-group-item pointer",attrs:{"data-toggle":"collapse","data-target":"#1"}},[t._v("铝型材")]),t._v(" "),a("div",{staticClass:"collapse",staticStyle:{padding:"10px","background-color":"#ececec"},attrs:{id:"1"}},[a("table",{staticClass:"table table-bordered",staticStyle:{"background-color":"#fff"}},[a("tr",[a("td",[t._v("预计用量:")]),t._v(" "),a("td",[t._v("提单总量:")]),t._v(" "),a("td",[t._v("到货总量:")])])]),t._v(" "),a("table",{staticClass:"table table-bordered",staticStyle:{"background-color":"#fff"}},[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("提料数量")]),t._v(" "),a("th",[t._v("到货数量")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("佛碳喷涂")]),t._v(" "),a("td",[a("input",{staticClass:"form-control",attrs:{type:"number"}})])]),t._v(" "),a("tr",[a("td",[t._v("粉末喷涂")]),t._v(" "),a("td",[a("input",{staticClass:"form-control",attrs:{type:"number"}})])]),t._v(" "),a("tr",[a("td",[t._v("阳极氧化")]),t._v(" "),a("td",[a("input",{staticClass:"form-control",attrs:{type:"number"}})])]),t._v(" "),a("tr",[a("td",[t._v("素材")]),t._v(" "),a("td",[a("input",{staticClass:"form-control",attrs:{type:"number"}})])])])])]),t._v(" "),a("li",{staticClass:"list-group-item pointer",attrs:{"data-toggle":"collapse","data-target":"#2"}},[t._v("钢型材")]),t._v(" "),a("div",{staticClass:"collapse",staticStyle:{padding:"10px","background-color":"#ececec"},attrs:{id:"2"}},[a("table",{staticClass:"table table-bordered",staticStyle:{"background-color":"#fff"}},[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("规格")]),t._v(" "),a("th",[t._v("预算数量（吨）")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("槽钢")]),t._v(" "),a("td",[t._v("10#")]),t._v(" "),a("td",[a("input",{staticClass:"form-control",attrs:{type:"number"}})])]),t._v(" "),a("tr",[a("td",[t._v("角钢")]),t._v(" "),a("td",[t._v("5#")]),t._v(" "),a("td",[a("input",{staticClass:"form-control",attrs:{type:"number"}})])])])])]),t._v(" "),a("li",{staticClass:"list-group-item pointer",attrs:{"data-toggle":"collapse","data-target":"#3"}},[t._v("板材")]),t._v(" "),a("div",{staticClass:"collapse",staticStyle:{padding:"10px","background-color":"#ececec"},attrs:{id:"3"}},[a("table",{staticClass:"table table-bordered",staticStyle:{"background-color":"#fff"}},[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("预算数量（平）")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("6+12+6玻璃")]),t._v(" "),a("td",[a("input",{staticClass:"form-control",attrs:{type:"number"}})])]),t._v(" "),a("tr",[a("td",[t._v("6+1.14PVB+6玻璃")]),t._v(" "),a("td",[a("input",{staticClass:"form-control",attrs:{type:"number"}})])])])])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("确定")])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("联系人列表")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[this._v("×")])])}]};var i=function(t){a("UV8v")},o=a("VU/8")(s.a,r,!1,i,"data-v-c95071f8",null);e.default=o.exports},"3/0X":function(t,e,a){"use strict";(function(t){var s=a("Dd8w"),r=a.n(s),i=a("Xxa5"),o=a.n(i),n=a("exGp"),l=a.n(n),c=a("dBkQ"),d=a("aK6G"),m=a("TbzR");e.a={created:function(){this.id=this.$route.params.id,this.init()},data:function(){return{id:"",power:0,project:{},members:[],book:[],select:[],input:"",jobs:[0]}},methods:{init:function(){var t=this;return l()(o.a.mark(function e(){var a,s,r,i,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit(m.b),e.next=3,Object(c.b)({id:t.id});case 3:return a=e.sent,e.next=6,Object(c.d)(t.id);case 6:return s=e.sent,e.next=9,Object(c.e)(t.id);case 9:return r=e.sent,e.next=12,Object(d.c)();case 12:if(i=e.sent,1==a.data.res){e.next=18;break}return t.$store.commit(m.a),alert(a.data.text),t.$router.push("/home"),e.abrupt("return");case 18:if(1==s.data.res){e.next=24;break}return t.$store.commit(m.a),alert(s.data.text),t.$router.push("/home"),e.abrupt("return");case 24:if(1==r.data.res){e.next=30;break}return t.$store.commit(m.a),alert(r.data.text),t.$router.push("/home"),e.abrupt("return");case 30:if(1==i.data.res){e.next=34;break}return alert(i.data.text),e.abrupt("return");case 34:t.project=s.data.body,t.power=a.data.body,n=r.data.body.filter(function(t){return 0==t.job}),t.members=r.data.body.filter(function(t){return 0!=t.job}),t.members.unshift(n[0]),t.book=i.data.body,t.$store.commit(m.a);case 42:case"end":return e.stop()}},e,t)}))()},jobChange:function(t){this.members[t].job=this.jobs[t]},push_select:function(){var t=this;this.select_member.filter(function(e){return t.members.map(function(t){return t.id}).indexOf(e.id)<0}).forEach(function(e){t.members.push(e)})},remove:function(t){this.members=this.members.filter(function(e,a){return a!=t})},collapse:function(e){t("#"+e).toggle()},add:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.input){e.next=3;break}return alert("不能为空"),e.abrupt("return");case 3:return e.next=5,Object(d.d)({username:t.input});case 5:if(1==(a=e.sent).data.res){e.next=9;break}return alert(a.data.text),e.abrupt("return");case 9:if(!(t.members.filter(function(t){return t.id==a.data.body.id}).length>0)){e.next=13;break}return alert("用户已存在"),e.abrupt("return");case 13:t.members.push(r()({},a.data.body,{job:1,state:0})),t.input="";case 15:case"end":return e.stop()}},e,t)}))()},memberEdit:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit(m.b),e.next=3,Object(c.f)(t.members,t.id);case 3:if(1==(a=e.sent).data.res){e.next=8;break}return t.$store.commit(m.a),alert(a.data.text),e.abrupt("return");case 8:t.$store.commit(m.a),alert("修改成功");case 11:case"end":return e.stop()}},e,t)}))()},infoEdit:function(){var t=this;return l()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.commit(m.b),e.next=3,Object(c.c)(t.project);case 3:if(1==(a=e.sent).data.res){e.next=8;break}return t.$store.commit(m.a),alert(a.data.text),e.abrupt("return");case 8:t.$store.commit(m.a),alert("修改成功");case 11:case"end":return e.stop()}},e,t)}))()}},computed:{book_member:function(){return this.book.map(function(t){return t.member})},select_member:function(){var t=this,e=[];return this.select.forEach(function(a){t.book_member.forEach(function(t){t.forEach(function(t){t.member==a&&(t.id=t.member,t.job=1,t.state=0,t.jointime="",e.push(t))})})}),e}},watch:{members:{handler:function(t,e){this.jobs=t.map(function(t){return t.job})},immediate:!1,deep:!0}}}}).call(e,a("4kSj"))},UV8v:function(t,e){}});
//# sourceMappingURL=8.944a3b2fc45e8c0c580c.js.map