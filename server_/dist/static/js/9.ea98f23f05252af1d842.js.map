{"version":3,"sources":["webpack:///src/page/addPro/children/step2.vue","webpack:///./src/page/addPro/children/step2.vue?dd3b","webpack:///./src/page/addPro/children/step2.vue"],"names":["__webpack_exports__","created","this","$store","state","newPro","number","name","$router","push","init","data","members","input","book","select","jobs","methods","_this","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","a","mark","_callee","res","wrap","_context","prev","next","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default","userInfo","job","Object","__WEBPACK_IMPORTED_MODULE_3__api_book_js__","sent","alert","text","abrupt","body","stop","collapse","r","$","toggle","active","add","_this2","_callee2","_context2","username","filter","item","id","length","jobChange","key","push_select","_this3","select_member","map","indexOf","forEach","remove","key1","finish","_this4","_callee3","_context3","commit","__WEBPACK_IMPORTED_MODULE_5__store_mutation_types_js__","__WEBPACK_IMPORTED_MODULE_4__api_pro_js__","computed","book_member","member","_this5","arr","item2","item3","watch","handler","newval","oldval","immediate","deep","children_step2","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","directives","rawName","value","expression","_l","class","list-group-item-success","list-group-item-info","staticStyle","position","_s","nickname","width","on","change","$event","$$selectedVal","Array","prototype","call","target","options","o","selected","_value","$set","multiple","attrs","top","right","click","_e","margin-bottom","padding-top","type","placeholder","domProps","composing","margin-left","to","ref","refInFor","data-toggle","data-target","padding-left","key2","checked","isArray","_i","stopPropagation","$$a","$$el","$$c","$$v","$$i","concat","slice","data-dismiss","staticRenderFns","flex","margin-top","font-size","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","step2"],"mappings":"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","file":"static/js/9.ea98f23f05252af1d842.js","sourcesContent":["<template>\r\n<div class=\"row\">\r\n    <div class=\"col-md-4 offset-md-4\">\r\n        <div class=\"d-flex justify-content-center align-items-center\">\r\n            <span class=\"step step1 text-center\" style=\"flex:2\">项目信息</span>\r\n            <span class=\"step step2 text-center active\" style=\"flex:2\">人员列表</span>\r\n            <span class=\"step step3 text-center\" style=\"flex:1\">完成</span>\r\n        </div>\r\n        <div class=\"form-group\" v-show=\"members.length>0\">\r\n            <label >参与人列表:</label>\r\n            <ul class=\"list-group\">\r\n                <li style=\"position:relative\" class=\"list-group-item d-flex justify-content-between align-items-center\" :class=\"{'list-group-item-success':key!=0,'list-group-item-info':key==0}\" v-for=\"(item,key) in members\" :key=\"key\">\r\n                    <span>{{item.nickname}}(账号:{{item.username}})</span>\r\n                    <select class=\"form-control\" style=\"width:auto\" @change=\"jobChange(key)\" v-model=\"jobs[key]\" v-if=\"key==0\">\r\n                        <option value=\"0\">创建者</option>\r\n                    </select>\r\n                     <select class=\"form-control\" style=\"width:auto\" @change=\"jobChange(key)\" v-model=\"jobs[key]\" v-else>\r\n                        <option value=\"1\">参与人</option>\r\n                        <option value=\"2\">材料商</option>\r\n                        <option value=\"3\">领导</option>\r\n                    </select>\r\n                    <span style=\"position:absolute;top:1px;right:3px\" class=\"delete pointer\" @click=\"remove(key)\" v-if=\"key!=0\">&times;</span>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"d-flex flex-wrap justify-content-between\" style=\"margin-bottom:30px\">\r\n            <label style=\"padding-top:5px\">添加参与人:</label>\r\n            <div class=\"d-flex justify-content-center w-100\">\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"对方手机号/账户\" v-model=\"input\">\r\n                <button type=\"button\" class=\"btn btn-info\" style=\"margin-left:10px\" @click=\"add\">添加</button>\r\n            </div>\r\n        </div>\r\n        <div class=\"d-flex flex-wrap justify-content-between\">\r\n            <label>从通讯录中选择:</label>\r\n        </div>\r\n         <div class=\"d-flex flex-wrap justify-content-center\" style=\"margin-top:10px\">\r\n            <button type=\"button\" class=\"btn btn-info w-50\" style=\"font-size:.5rem\" data-toggle=\"modal\" data-target=\"#select\">选择通讯录</button>\r\n        </div>\r\n         <div class=\"controller\">\r\n             <router-link to=\"/addPro/step1\" class=\"btn btn-outline-primary w-40\">上一步</router-link>\r\n             <button type=\"button\" class=\"btn btn-outline-primary w-40\" @click=\"finish\">完成</button>\r\n        </div>\r\n        <div class=\"d-flex flex-wrap justify-content-center\" style=\"margin-top:10px\">\r\n            <small class=\"text-secondary\">选择完成后将发送邀请</small>\r\n        </div>\r\n    </div>\r\n<!-- --------------------------------------- -->\r\n                    <div class=\"modal fade\" id=\"select\">\r\n                        <div class=\"modal-dialog\">\r\n                            <div class=\"modal-content\">\r\n                        \r\n                            <!-- 模态框头部 -->\r\n                            <div class=\"modal-header\">\r\n                                <h4 class=\"modal-title\">联系人列表</h4>\r\n                                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">&times;</button>\r\n                            </div>\r\n                        \r\n                            <!-- 模态框主体 -->\r\n                            <div class=\"modal-body\">\r\n                               \r\n                                <ul class=\"list-group\">\r\n                                    <li class=\"list-group-item pointer\" data-toggle=\"collapse\" :data-target=\"key\" v-for=\"(item,key) in book\" :key=\"key\" :ref=\"key\"  @click=\"collapse(key)\">\r\n                                        {{item.name}}\r\n                                        <span class=\"badge badge-pill badge-info\" >{{item.member.length}}</span>\r\n                                        <div :id=\"key\" class=\"collapse\">\r\n                                            <ul class=\"list-group\" style=\"padding-left:30px\">\r\n                                                 <label class=\"form-check-label\" v-for=\"(item2,key2) in item.member\" :key=\"key2\">\r\n                                                    <input type=\"checkbox\" class=\"form-check-input\" :value=\"item2.member\" @click.stop=\"()=>{}\" v-model=\"select\">{{item2.nickname}}\r\n                                                </label>\r\n                                            </ul>\r\n                                        </div>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        \r\n                            <!-- 模态框底部 -->\r\n                            <div class=\"modal-footer\">\r\n                                已选择：<span v-for=\"(item,key) in select_member\" :key=\"key\">{{item.nickname}}</span>\r\n                                <button type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" @click=\"push_select\">确定</button>\r\n                            </div>\r\n                        \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {get_book,get_userInfo} from '../../../api/book.js';\r\nimport {add_pro} from '../../../api/pro.js';\r\nimport {UPDATEPRO_MEMBER,LOADING_START,LOADING_END} from '../../../store/mutation_types.js';\r\nexport default {\r\n    created(){\r\n        if(this.$store.state.newPro.number=='' || this.$store.state.newPro.name==''){this.$router.push('/addPro/step1')}\r\n        this.init();\r\n    },\r\n    data(){\r\n        return {\r\n           members:[],\r\n           input:'',\r\n           book:[],\r\n           select:[],\r\n           jobs:[0]\r\n        }\r\n    },\r\n    methods:{\r\n        async init(){\r\n            this.members=this.$store.state.newPro.members;\r\n            this.members[0]={...this.$store.state.userInfo,job:0};\r\n            let res=await get_book();\r\n            if(res.data.res!=1){alert(res.data.text);return};\r\n            this.book=res.data.body;\r\n        },\r\n        collapse(r){\r\n            $('#'+r).toggle();\r\n        },\r\n              active(){\r\n            alert('ok')\r\n        },\r\n        async add(){\r\n            if(this.input==''){alert('不能为空');return}\r\n            let res = await get_userInfo({username:this.input});\r\n            if(res.data.res!=1){alert(res.data.text);return;};\r\n            if(this.members.filter(item=>item.id==res.data.body.id).length>0){alert('用户已存在');return;}\r\n            this.members.push({...res.data.body,job:1});\r\n            this.input=''\r\n        },\r\n        jobChange(key){\r\n            this.members[key]['job']=this.jobs[key];\r\n        },\r\n        push_select(){\r\n            let arr=this.select_member.filter(item=>this.members.map(item=>item.id).indexOf(item.id)<0)\r\n            arr.forEach(item=>{\r\n                this.members.push(item)\r\n            })\r\n        },\r\n        remove(key){\r\n            this.members=this.members.filter((item,key1)=>key1!=key);\r\n        },\r\n        async finish(){\r\n            let data={\r\n                ...this.$store.state.newPro,members:this.members.map(item=>{\r\n                    return {id:item.id,job:item.job}\r\n                })\r\n            }\r\n            this.$store.commit(LOADING_START)\r\n            let res=await add_pro(data);\r\n            this.$store.commit(LOADING_END)\r\n            if(res.data.res!=1){alert(res.data.text);return;}\r\n            alert('工程创建成功，即将跳转到工程管理页面');\r\n            this.$router.push('/pro/'+res.data.body+'/set')\r\n        }\r\n    },\r\n    computed:{\r\n        book_member(){\r\n            return this.book.map(item=>item.member);\r\n        },\r\n        select_member(){\r\n            let arr=[];\r\n            this.select.forEach(item=>{\r\n                this.book_member.forEach(item2=>{\r\n                    item2.forEach(item3=>{\r\n                        if(item3.member==item){\r\n                            item3.id=item3.member;\r\n                            item3.job=1;\r\n                            arr.push(item3)\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n            return arr;\r\n        }\r\n    },\r\n    watch:{\r\n        members:{\r\n            handler(newval,oldval){\r\n               this.$store.commit(UPDATEPRO_MEMBER,newval);\r\n               this.jobs=newval.map(item=>item.job)\r\n            },\r\n            immediate:false,\r\n            deep:true\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import \"../../../assets/css/theme.less\";\r\n.row{\r\n    padding:10px;\r\n    min-height:300px;\r\n\r\n}\r\n.controller{\r\n    margin-top: 50px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .btn:nth-child(1){\r\n        width: 30%\r\n    }\r\n    .btn:nth-child(2){\r\n        width: 68%\r\n    }\r\n}\r\n.title{\r\n    font-size: 1rem;\r\n}\r\n.step{\r\n    background-color: #9d9d9d;\r\n    color:#fff;\r\n    position: relative;\r\n    margin-right: 10px;\r\n    padding:3px 0;\r\n}\r\n.active{\r\n    background-color: @cut1;\r\n}\r\n.active::after{\r\n    border-left: 10px solid @cut1 !important;\r\n}\r\n.step1::after{\r\n    content: '';\r\n    width:0; \r\n    height:0; \r\n    position: absolute;\r\n    right:-10px;\r\n    top:calc(50% - 10px);\r\n    border-top:10px solid transparent;\r\n    border-bottom: 10px solid transparent;\r\n    border-left: 10px solid #9d9d9d;\r\n}\r\n.step2::after{\r\n    content: '';\r\n    width:0; \r\n    height:0; \r\n    position: absolute;\r\n    right:-10px;\r\n    top:calc(50% - 10px);\r\n    border-top:10px solid transparent;\r\n    border-bottom: 10px solid transparent;\r\n    border-left: 10px solid #9d9d9d;\r\n}\r\n.step2::before{\r\n    content: '';\r\n    width:0; \r\n    height:0; \r\n    position: absolute;\r\n    left:0;\r\n    top:calc(50% - 10px);\r\n    border-top:10px solid transparent;\r\n    border-bottom: 10px solid transparent;\r\n    border-left: 10px solid #fff;\r\n}\r\n.step3::before{\r\n    content: '';\r\n    width:0; \r\n    height:0; \r\n    position: absolute;\r\n    left:0;\r\n    top:calc(50% - 10px);\r\n    border-top:10px solid transparent;\r\n    border-bottom: 10px solid transparent;\r\n    border-left: 10px solid #fff;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/addPro/children/step2.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-4 offset-md-4\"},[_vm._m(0),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.members.length>0),expression:\"members.length>0\"}],staticClass:\"form-group\"},[_c('label',[_vm._v(\"参与人列表:\")]),_vm._v(\" \"),_c('ul',{staticClass:\"list-group\"},_vm._l((_vm.members),function(item,key){return _c('li',{key:key,staticClass:\"list-group-item d-flex justify-content-between align-items-center\",class:{'list-group-item-success':key!=0,'list-group-item-info':key==0},staticStyle:{\"position\":\"relative\"}},[_c('span',[_vm._v(_vm._s(item.nickname)+\"(账号:\"+_vm._s(item.username)+\")\")]),_vm._v(\" \"),(key==0)?_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.jobs[key]),expression:\"jobs[key]\"}],staticClass:\"form-control\",staticStyle:{\"width\":\"auto\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.jobs, key, $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){_vm.jobChange(key)}]}},[_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(\"创建者\")])]):_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.jobs[key]),expression:\"jobs[key]\"}],staticClass:\"form-control\",staticStyle:{\"width\":\"auto\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.jobs, key, $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){_vm.jobChange(key)}]}},[_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"参与人\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"材料商\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"3\"}},[_vm._v(\"领导\")])]),_vm._v(\" \"),(key!=0)?_c('span',{staticClass:\"delete pointer\",staticStyle:{\"position\":\"absolute\",\"top\":\"1px\",\"right\":\"3px\"},on:{\"click\":function($event){_vm.remove(key)}}},[_vm._v(\"×\")]):_vm._e()])}))]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex flex-wrap justify-content-between\",staticStyle:{\"margin-bottom\":\"30px\"}},[_c('label',{staticStyle:{\"padding-top\":\"5px\"}},[_vm._v(\"添加参与人:\")]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex justify-content-center w-100\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.input),expression:\"input\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"对方手机号/账户\"},domProps:{\"value\":(_vm.input)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.input=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-info\",staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"button\"},on:{\"click\":_vm.add}},[_vm._v(\"添加\")])])]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('div',{staticClass:\"controller\"},[_c('router-link',{staticClass:\"btn btn-outline-primary w-40\",attrs:{\"to\":\"/addPro/step1\"}},[_vm._v(\"上一步\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-outline-primary w-40\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.finish}},[_vm._v(\"完成\")])],1),_vm._v(\" \"),_vm._m(3)]),_vm._v(\" \"),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"select\"}},[_c('div',{staticClass:\"modal-dialog\"},[_c('div',{staticClass:\"modal-content\"},[_vm._m(4),_vm._v(\" \"),_c('div',{staticClass:\"modal-body\"},[_c('ul',{staticClass:\"list-group\"},_vm._l((_vm.book),function(item,key){return _c('li',{key:key,ref:key,refInFor:true,staticClass:\"list-group-item pointer\",attrs:{\"data-toggle\":\"collapse\",\"data-target\":key},on:{\"click\":function($event){_vm.collapse(key)}}},[_vm._v(\"\\r\\n                                        \"+_vm._s(item.name)+\"\\r\\n                                        \"),_c('span',{staticClass:\"badge badge-pill badge-info\"},[_vm._v(_vm._s(item.member.length))]),_vm._v(\" \"),_c('div',{staticClass:\"collapse\",attrs:{\"id\":key}},[_c('ul',{staticClass:\"list-group\",staticStyle:{\"padding-left\":\"30px\"}},_vm._l((item.member),function(item2,key2){return _c('label',{key:key2,staticClass:\"form-check-label\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.select),expression:\"select\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"checkbox\"},domProps:{\"value\":item2.member,\"checked\":Array.isArray(_vm.select)?_vm._i(_vm.select,item2.member)>-1:(_vm.select)},on:{\"click\":function($event){$event.stopPropagation();return (function (){})($event)},\"change\":function($event){var $$a=_vm.select,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=item2.member,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.select=$$a.concat([$$v]))}else{$$i>-1&&(_vm.select=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.select=$$c}}}}),_vm._v(_vm._s(item2.nickname)+\"\\r\\n                                                \")])}))])])}))]),_vm._v(\" \"),_c('div',{staticClass:\"modal-footer\"},[_vm._v(\"\\r\\n                                已选择：\"),_vm._l((_vm.select_member),function(item,key){return _c('span',{key:key},[_vm._v(_vm._s(item.nickname))])}),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-success\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"},on:{\"click\":_vm.push_select}},[_vm._v(\"确定\")])],2)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex justify-content-center align-items-center\"},[_c('span',{staticClass:\"step step1 text-center\",staticStyle:{\"flex\":\"2\"}},[_vm._v(\"项目信息\")]),_vm._v(\" \"),_c('span',{staticClass:\"step step2 text-center active\",staticStyle:{\"flex\":\"2\"}},[_vm._v(\"人员列表\")]),_vm._v(\" \"),_c('span',{staticClass:\"step step3 text-center\",staticStyle:{\"flex\":\"1\"}},[_vm._v(\"完成\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-wrap justify-content-between\"},[_c('label',[_vm._v(\"从通讯录中选择:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-wrap justify-content-center\",staticStyle:{\"margin-top\":\"10px\"}},[_c('button',{staticClass:\"btn btn-info w-50\",staticStyle:{\"font-size\":\".5rem\"},attrs:{\"type\":\"button\",\"data-toggle\":\"modal\",\"data-target\":\"#select\"}},[_vm._v(\"选择通讯录\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-wrap justify-content-center\",staticStyle:{\"margin-top\":\"10px\"}},[_c('small',{staticClass:\"text-secondary\"},[_vm._v(\"选择完成后将发送邀请\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header\"},[_c('h4',{staticClass:\"modal-title\"},[_vm._v(\"联系人列表\")]),_vm._v(\" \"),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"×\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b2100cd4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/addPro/children/step2.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b2100cd4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./step2.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./step2.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./step2.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b2100cd4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./step2.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b2100cd4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/addPro/children/step2.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}